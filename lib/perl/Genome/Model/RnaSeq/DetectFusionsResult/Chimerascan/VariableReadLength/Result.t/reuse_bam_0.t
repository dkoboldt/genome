#!/usr/bin/env genome-perl
use strict;
use warnings;

BEGIN {
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
};

use above 'Genome';
use Test::More;
use Genome::Model::RnaSeq::DetectFusionsResult::Chimerascan::TestHelpers qw(setup);

my $chimerascan_result_class = 'Genome::Model::RnaSeq::DetectFusionsResult::Chimerascan::VariableReadLength::Result';
use_ok($chimerascan_result_class);

my $chimerascan_version = '0.4.6';
my $picard_version = 1.82;
my ($alignment_result, $annotation_build, $result_users, @bam_files) = setup(test_data_version => 3,
        picard_version => $picard_version,
        chimerascan_result_class => $chimerascan_result_class,
        chimerascan_version => $chimerascan_version);


my $r = $chimerascan_result_class->get_or_create(
    alignment_result => $alignment_result,
    version => $chimerascan_version,
    bowtie_version => '0.12.7',
    reuse_bam => 0,
    detector_params => "-p 2",
    annotation_build => $annotation_build,
    picard_version => $picard_version,
    original_bam_paths => \@bam_files,
    users => $result_users,
);
isa_ok($r, $chimerascan_result_class);

done_testing();

1;
