#!/usr/bin/env genome-perl
use strict;
use warnings;

BEGIN {
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
};

use above 'Genome';
use Test::More;
use Genome::Model::RnaSeq::DetectFusionsResult::Chimerascan::TestHelpers qw(setup);

my $picard_version = 1.82;
my $chimerascan_version = '0.4.5';
my $chimerascan_result_class = "Genome::Model::RnaSeq::DetectFusionsResult::Chimerascan::FixedReadLength::Result";
use_ok($chimerascan_result_class);
my ($alignment_result, $annotation_build, $result_users, @bam_files) = setup(test_data_version => 4,
        chimerascan_version => $chimerascan_version,
        chimerascan_result_class => $chimerascan_result_class,
        picard_version => $picard_version);

my $no_bam_result = $chimerascan_result_class->get_or_create(
    picard_version => $picard_version,
    alignment_result => $alignment_result,
    version => $chimerascan_version,
    bowtie_version => '0.12.7',
    reuse_bam => 1,
    detector_params => "-p 2",
    annotation_build => $annotation_build,
    original_bam_paths => \@bam_files,
    users => $result_users,
);
isa_ok($no_bam_result, $chimerascan_result_class);

done_testing();

1;
