#!/usr/bin/env genome-perl

use strict;
use warnings FATAL => 'all';

use Test::More;
use above 'Genome';

BEGIN {
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
};

my $pkg = 'Genome::Process::StatusEvent';
use_ok($pkg) || die;

my $se = $pkg->create(
    old_status => 'New',
    new_status => 'Running',
);
ok(defined($se->timestamp), 'timestamp is automatically set');

$se = $pkg->create(
    new_status => 'Running',
);
is($se, undef, 'create returns undef if transition is invalid');

done_testing();
